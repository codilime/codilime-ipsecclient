{
  "vrf": {
    "client_name": "ansible_x509",
    "vlan": [
      {
        "vlan": 321,
        "lan_ip": "1.1.1.1/24"
      },
      {
        "vlan": 456,
        "lan_ip": "2.2.2.2/24"
      }
    ],
    "crypto_ph1": "aes128.sha256.modp2048",
    "crypto_ph2": "aes128.sha256.modp2048",
    "physical_interface": "eth0",
    "active": true,
    "local_as": 65001,
    "disable_peer_ips": false,
    "ospf": false,
    "endpoint": [
      {
        "remote_ip_sec": "10.69.0.101",
        "local_ip": "10.0.1.1",
        "peer_ip": "10.0.1.2",
        "remote_as": 0,
        "nat": false,
        "bgp": true,
        "source_interface": "GigabitEthernet1",
        "authentication": {
          "type": "certs",
          "psk": "",
          "local_cert": "{{ lookup("file", "local_cert_1.pem") | replace("\n", "\\n") }}",
          "remote_cert": "{{ lookup("file", "remote_cert_1.pem") | replace("\n", "\\n") }}",
          "private_key": "{{ lookup("file", "private_key_1.pem") | replace("\n", "\\n") }}"
        }
      },
      {
        "remote_ip_sec": "10.69.0.102",
        "local_ip": "10.0.2.1",
        "peer_ip": "10.0.2.2",
        "remote_as": 0,
        "nat": false,
        "bgp": true,
        "source_interface": "GigabitEthernet1",
        "authentication": {
          "type": "certs",
          "psk": "",
          "local_cert": "{{ lookup("file", "local_cert_2.pem") | replace("\n", "\\n") }}",
          "remote_cert": "{{ lookup("file", "remote_cert_2.pem") | replace("\n", "\\n") }}",
          "private_key": "{{ lookup("file", "private_key_2.pem") | replace("\n", "\\n") }}"
        }
      }
    ]
  }
}
